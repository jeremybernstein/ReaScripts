<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>

<link href='https://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color: #ffffff; --text-color: #333333; --select-text-bg-color: #B5D6FC; --select-text-font-color: auto; --monospace: "Lucida Console",Consolas,"Courier",monospace; --title-bar-height: 20px; }
.mac-os-11 { --title-bar-height: 28px; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
h1, h2, h3, h4, h5 { white-space: pre-wrap; }
body { margin: 0px; padding: 0px; height: auto; inset: 0px; font-size: 1rem; line-height: 1.428571; overflow-x: hidden; background: inherit; }
iframe { margin: auto; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; overflow-wrap: break-word; position: relative; white-space: normal; overflow-x: visible; padding-top: 36px; }
#write.first-line-indent p { text-indent: 2em; }
#write.first-line-indent li p, #write.first-line-indent p * { text-indent: 0px; }
#write.first-line-indent li { margin-left: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
.typora-export .footnote-line, .typora-export li, .typora-export p { white-space: pre-wrap; }
.typora-export .task-list-item input { pointer-events: none; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  #write { padding-left: 20px; padding-right: 20px; }
}
#write li > figure:last-child { margin-bottom: 0.5rem; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; image-orientation: from-image; }
button, input, select, textarea { color: inherit; font-style: inherit; font-variant-caps: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; font-size-adjust: inherit; font-kerning: inherit; font-variant-alternates: inherit; font-variant-ligatures: inherit; font-variant-numeric: inherit; font-variant-east-asian: inherit; font-variant-position: inherit; font-variant-emoji: inherit; font-feature-settings: inherit; font-optical-sizing: inherit; font-variation-settings: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
p { line-height: inherit; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 4; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
.md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p { margin-top: 1rem; margin-bottom: 1rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px; }
thead, tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 32px; }
.CodeMirror-gutters { border-right-width: 0px; border-right-style: none; border-right-color: currentcolor; background-color: inherit; }
.CodeMirror-linenumber { -webkit-user-select: none; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
#write pre { white-space: pre-wrap; }
#write.fences-no-line-wrapping pre { white-space: pre; }
#write pre.ty-contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-fences-adv-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
#write .md-fences.mock-cm { white-space: pre-wrap; }
.md-fences.md-fences-with-lineno { padding-left: 0px; }
#write.fences-no-line-wrapping .md-fences.mock-cm { white-space: pre; overflow-x: auto; }
.md-fences.mock-cm.md-fences-with-lineno { padding-left: 8px; }
.CodeMirror-line, twitterwidget { break-inside: avoid; }
svg { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li blockquote { margin: 1rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
#write .footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; font-variant-ligatures: no-common-ligatures; }
  #write { margin-top: 0px; border-color: transparent !important; padding-top: 0px !important; padding-bottom: 0px !important; }
  .typora-export * { print-color-adjust: exact; }
  .typora-export #write { break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  .is-mac table { break-inside: avoid; }
  #write > p:nth-child(1) { margin-top: 0px; }
  .typora-export-show-outline .typora-export-sidebar { display: none; }
  figure { overflow-x: visible; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > .md-image:only-child:not(.md-img-error) img, p > img:only-child { display: block; margin: auto; }
#write.first-line-indent p > .md-image:only-child:not(.md-img-error) img { left: -2em; position: relative; }
p > .md-image:only-child { display: inline-block; width: 100%; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.md-math-block { width: 100%; }
.md-math-block:not(:empty)::after { display: none; }
.MathJax_ref { fill: currentcolor; }
[contenteditable="true"]:active, [contenteditable="true"]:focus, [contenteditable="false"]:active, [contenteditable="false"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); border: medium; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { text-decoration: underline; }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.reversefootnote { font-family: ui-monospace, sans-serif; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, samp, tt { font-family: var(--monospace); }
kbd { margin: 0px 0.1em; padding: 0.1em 0.6em; font-size: 0.8em; color: rgb(36, 39, 41); background: rgb(255, 255, 255); border: 1px solid rgb(173, 179, 185); border-radius: 3px; box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset; white-space: nowrap; vertical-align: middle; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.6; font-family: var(--monospace); }
code { text-align: left; vertical-align: initial; }
a.md-print-anchor { white-space: pre !important; border-width: medium !important; border-style: none !important; border-color: currentcolor !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; height: auto; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom-width: 0px; border-bottom-style: none; border-bottom-color: currentcolor; }
video { max-width: 100%; display: block; margin: 0px auto; }
iframe { max-width: 100%; width: 100%; border: medium; }
.highlight td, .highlight tr { border: 0px; }
mark { background: rgb(255, 255, 0); color: rgb(0, 0, 0); }
.md-html-inline .md-plain, .md-html-inline strong, mark .md-inline-math, mark strong { color: inherit; }
.md-expand mark .md-meta { opacity: 0.3 !important; }
mark .md-meta { color: rgb(0, 0, 0); }
@media print {
  .typora-export h1, .typora-export h2, .typora-export h3, .typora-export h4, .typora-export h5, .typora-export h6 { break-inside: avoid; }
}
.md-diagram-panel .messageText { stroke: none !important; }
.md-diagram-panel .start-state { fill: var(--node-fill); }
.md-diagram-panel .edgeLabel rect { opacity: 1 !important; }
.md-fences.md-fences-math { font-size: 1em; }
.md-fences-advanced:not(.md-focus) { padding: 0px; white-space: nowrap; border: 0px; }
.md-fences-advanced:not(.md-focus) { background: inherit; }
.typora-export-show-outline .typora-export-content { max-width: 1440px; margin: auto; display: flex; flex-direction: row; }
.typora-export-sidebar { width: 300px; font-size: 0.8rem; margin-top: 80px; margin-right: 18px; }
.typora-export-show-outline #write { --webkit-flex: 2; flex: 2 1 0%; }
.typora-export-sidebar .outline-content { position: fixed; top: 0px; max-height: 100%; overflow: hidden auto; padding-bottom: 30px; padding-top: 60px; width: 300px; }
@media screen and (max-width: 1024px) {
  .typora-export-sidebar, .typora-export-sidebar .outline-content { width: 240px; }
}
@media screen and (max-width: 800px) {
  .typora-export-sidebar { display: none; }
}
.outline-content li, .outline-content ul { margin-left: 0px; margin-right: 0px; padding-left: 0px; padding-right: 0px; list-style: none; overflow-wrap: anywhere; }
.outline-content ul { margin-top: 0px; margin-bottom: 0px; }
.outline-content strong { font-weight: 400; }
.outline-expander { width: 1rem; height: 1.428571rem; position: relative; display: table-cell; vertical-align: middle; cursor: pointer; padding-left: 4px; }
.outline-expander::before { content: ""; position: relative; font-family: Ionicons; display: inline-block; font-size: 8px; vertical-align: middle; }
.outline-item { padding-top: 3px; padding-bottom: 3px; cursor: pointer; }
.outline-expander:hover::before { content: ""; }
.outline-h1 > .outline-item { padding-left: 0px; }
.outline-h2 > .outline-item { padding-left: 1em; }
.outline-h3 > .outline-item { padding-left: 2em; }
.outline-h4 > .outline-item { padding-left: 3em; }
.outline-h5 > .outline-item { padding-left: 4em; }
.outline-h6 > .outline-item { padding-left: 5em; }
.outline-label { cursor: pointer; display: table-cell; vertical-align: middle; text-decoration: none; color: inherit; }
.outline-label:hover { text-decoration: underline; }
.outline-item:hover { border-color: rgb(245, 245, 245); background-color: var(--item-hover-bg-color); }
.outline-item:hover { margin-left: -28px; margin-right: -28px; border-left-width: 28px; border-left-style: solid; border-left-color: transparent; border-right-width: 28px; border-right-style: solid; border-right-color: transparent; }
.outline-item-single .outline-expander::before, .outline-item-single .outline-expander:hover::before { display: none; }
.outline-item-open > .outline-item > .outline-expander::before { content: ""; }
.outline-children { display: none; }
.info-panel-tab-wrapper { display: none; }
.outline-item-open > .outline-children { display: block; }
.typora-export .outline-item { padding-top: 1px; padding-bottom: 1px; }
.typora-export .outline-item:hover { margin-right: -8px; border-right-width: 8px; border-right-style: solid; border-right-color: transparent; }
.typora-export .outline-expander::before { content: "+"; font-family: inherit; top: -1px; }
.typora-export .outline-expander:hover::before, .typora-export .outline-item-open > .outline-item > .outline-expander::before { content: "−"; }
.typora-export-collapse-outline .outline-children { display: none; }
.typora-export-collapse-outline .outline-item-open > .outline-children, .typora-export-no-collapse-outline .outline-children { display: block; }
.typora-export-no-collapse-outline .outline-expander::before { content: "" !important; }
.typora-export-show-outline .outline-item-active > .outline-item .outline-label { font-weight: 700; }
.md-inline-math-container mjx-container { zoom: 0.95; }
mjx-container { break-inside: avoid; }
.md-alert.md-alert-note { border-left-color: rgb(9, 105, 218); }
.md-alert.md-alert-important { border-left-color: rgb(130, 80, 223); }
.md-alert.md-alert-warning { border-left-color: rgb(154, 103, 0); }
.md-alert.md-alert-tip { border-left-color: rgb(31, 136, 61); }
.md-alert.md-alert-caution { border-left-color: rgb(207, 34, 46); }
.md-alert { padding: 0px 1em; margin-bottom: 16px; color: inherit; border-left-width: 0.25em; border-left-style: solid; border-left-color: rgb(0, 0, 0); }
.md-alert-text-note { color: rgb(9, 105, 218); }
.md-alert-text-important { color: rgb(130, 80, 223); }
.md-alert-text-warning { color: rgb(154, 103, 0); }
.md-alert-text-tip { color: rgb(31, 136, 61); }
.md-alert-text-caution { color: rgb(207, 34, 46); }
.md-alert-text { font-size: 0.9rem; font-weight: 700; }
.md-alert-text svg { fill: currentcolor; position: relative; top: 0.125em; margin-right: 1ch; overflow: visible; }
.md-alert-text-container::after { content: attr(data-text); text-transform: capitalize; pointer-events: none; margin-right: 1ch; }


.CodeMirror { height: auto; }
.CodeMirror.cm-s-inner { background: inherit; }
.CodeMirror-scroll { overflow: auto hidden; z-index: 3; }
.CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler { background-color: rgb(255, 255, 255); }
.CodeMirror-gutters { border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); background: inherit; white-space: nowrap; }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: rgb(0, 0, 0); }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-property { color: rgb(0, 0, 0); }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: rgb(0, 0, 255); }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: 700; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: red; }
.cm-invalidchar { color: red; }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { height: 100%; outline: 0px; position: relative; box-sizing: content-box; background: inherit; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar { position: absolute; z-index: 6; display: none; outline: 0px; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow: hidden; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow: auto hidden; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 10px; z-index: 3; overflow-y: hidden; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: 0px 0px !important; border: medium !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: 0px 0px; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; overflow-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { overflow-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right-width: 30px; border-right-style: solid; border-right-color: transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right-width: medium; border-right-style: none; border-right-color: currentcolor; width: auto; }
.CodeMirror-linebackground { position: absolute; inset: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right-width: medium; border-right-style: none; border-right-color: currentcolor; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
span.cm-underlined { text-decoration: underline; }
span.cm-strikethrough { text-decoration: line-through; }
.cm-tw-syntaxerror { color: rgb(255, 255, 255); background-color: rgb(153, 0, 0); }
.cm-tw-deleted { text-decoration: line-through; }
.cm-tw-header5 { font-weight: 700; }
.cm-tw-listitem:first-child { padding-left: 10px; }
.cm-tw-box { border-style: solid; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 1px; border-color: inherit; border-top-width: 0px !important; }
.cm-tw-underline { text-decoration: underline; }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}


:root {
    --side-bar-bg-color: #fafafa;
    --control-text-color: #777;
}

@include-when-export url(https://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext);

/* open-sans-regular - latin-ext_latin */
  /* open-sans-italic - latin-ext_latin */
    /* open-sans-700 - latin-ext_latin */
    /* open-sans-700italic - latin-ext_latin */
  html {
    font-size: 16px;
    -webkit-font-smoothing: antialiased;
}

body {
    font-family: "Open Sans","Clear Sans", "Helvetica Neue", Helvetica, Arial, 'Segoe UI Emoji', sans-serif;
    color: rgb(51, 51, 51);
    line-height: 1.6;
}

#write {
    max-width: 860px;
  	margin: 0 auto;
  	padding: 30px;
    padding-bottom: 100px;
}

@media only screen and (min-width: 1400px) {
	#write {
		max-width: 1024px;
	}
}

@media only screen and (min-width: 1800px) {
	#write {
		max-width: 1200px;
	}
}

#write > ul:first-child,
#write > ol:first-child{
    margin-top: 30px;
}

a {
    color: #4183C4;
}
h1,
h2,
h3,
h4,
h5,
h6 {
    position: relative;
    margin-top: 1rem;
    margin-bottom: 1rem;
    font-weight: bold;
    line-height: 1.4;
    cursor: text;
}
h1:hover a.anchor,
h2:hover a.anchor,
h3:hover a.anchor,
h4:hover a.anchor,
h5:hover a.anchor,
h6:hover a.anchor {
    text-decoration: none;
}
h1 tt,
h1 code {
    font-size: inherit;
}
h2 tt,
h2 code {
    font-size: inherit;
}
h3 tt,
h3 code {
    font-size: inherit;
}
h4 tt,
h4 code {
    font-size: inherit;
}
h5 tt,
h5 code {
    font-size: inherit;
}
h6 tt,
h6 code {
    font-size: inherit;
}
h1 {
    font-size: 2.25em;
    line-height: 1.2;
    border-bottom: 1px solid #eee;
}
h2 {
    font-size: 1.75em;
    line-height: 1.225;
    border-bottom: 1px solid #eee;
}

/*@media print {
    .typora-export h1,
    .typora-export h2 {
        border-bottom: none;
        padding-bottom: initial;
    }

    .typora-export h1::after,
    .typora-export h2::after {
        content: "";
        display: block;
        height: 100px;
        margin-top: -96px;
        border-top: 1px solid #eee;
    }
}*/

h3 {
    font-size: 1.5em;
    line-height: 1.43;
}
h4 {
    font-size: 1.25em;
}
h5 {
    font-size: 1em;
}
h6 {
   font-size: 1em;
    color: #777;
}
p,
blockquote,
ul,
ol,
dl,
table{
    margin: 0.8em 0;
}
li>ol,
li>ul {
    margin: 0 0;
}
hr {
    height: 2px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
    overflow: hidden;
    box-sizing: content-box;
}

li p.first {
    display: inline-block;
}
ul,
ol {
    padding-left: 30px;
}
ul:first-child,
ol:first-child {
    margin-top: 0;
}
ul:last-child,
ol:last-child {
    margin-bottom: 0;
}
blockquote {
    border-left: 4px solid #dfe2e5;
    padding: 0 15px;
    color: #777777;
}
blockquote blockquote {
    padding-right: 0;
}
table {
    padding: 0;
    word-break: initial;
}
table tr {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 0;
}
table tr:nth-child(2n),
thead {
    background-color: #f8f8f8;
}
table th {
    font-weight: bold;
    border: 1px solid #dfe2e5;
    border-bottom: 0;
    margin: 0;
    padding: 6px 13px;
}
table td {
    border: 1px solid #dfe2e5;
    margin: 0;
    padding: 6px 13px;
}
table th:first-child,
table td:first-child {
    margin-top: 0;
}
table th:last-child,
table td:last-child {
    margin-bottom: 0;
}

.CodeMirror-lines {
    padding-left: 4px;
}

.code-tooltip {
    box-shadow: 0 1px 1px 0 rgba(0,28,36,.3);
    border-top: 1px solid #eef2f2;
}

.md-fences,
code,
tt {
    border: 1px solid #e7eaed;
    background-color: #f8f8f8;
    border-radius: 3px;
    padding: 0;
    padding: 2px 4px 0px 4px;
    font-size: 0.9em;
}

code {
    background-color: #f3f4f4;
    padding: 0 2px 0 2px;
}

.md-fences {
    margin-bottom: 15px;
    margin-top: 15px;
    padding-top: 8px;
    padding-bottom: 6px;
}


.md-task-list-item > input {
  margin-left: -1.3em;
}

@media print {
    html {
        font-size: 13px;
    }
    pre {
        page-break-inside: avoid;
        word-wrap: break-word;
    }
}

.md-fences {
	background-color: #f8f8f8;
}
#write pre.md-meta-block {
	padding: 1rem;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 0;
    border-radius: 3px;
    color: #777777;
    margin-top: 0 !important;
}

.mathjax-block>.code-tooltip {
	bottom: .375rem;
}

.md-mathjax-midline {
    background: #fafafa;
}

#write>h3.md-focus:before{
	left: -1.5625rem;
	top: .375rem;
}
#write>h4.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h5.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
#write>h6.md-focus:before{
	left: -1.5625rem;
	top: .285714286rem;
}
.md-image>.md-meta {
    /*border: 1px solid #ddd;*/
    border-radius: 3px;
    padding: 2px 0px 0px 4px;
    font-size: 0.9em;
    color: inherit;
}

.md-tag {
    color: #a7a7a7;
    opacity: 1;
}

.md-toc { 
    margin-top:20px;
    padding-bottom:20px;
}

.sidebar-tabs {
    border-bottom: none;
}

#typora-quick-open {
    border: 1px solid #ddd;
    background-color: #f8f8f8;
}

#typora-quick-open-item {
    background-color: #FAFAFA;
    border-color: #FEFEFE #e5e5e5 #e5e5e5 #eee;
    border-style: solid;
    border-width: 1px;
}

/** focus mode */
.on-focus-mode blockquote {
    border-left-color: rgba(85, 85, 85, 0.12);
}

header, .context-menu, .megamenu-content, footer{
    font-family: "Segoe UI", "Arial", sans-serif;
}

.file-node-content:hover .file-node-icon,
.file-node-content:hover .file-node-open-state{
    visibility: visible;
}

.mac-seamless-mode #typora-sidebar {
    background-color: #fafafa;
    background-color: var(--side-bar-bg-color);
}

.mac-os #write{
    caret-color: AccentColor;
}

.md-lang {
    color: #b4654d;
}

/*.html-for-mac {
    --item-hover-bg-color: #E6F0FE;
}*/

#md-notification .btn {
    border: 0;
}

.dropdown-menu .divider {
    border-color: #e5e5e5;
    opacity: 0.4;
}

.ty-preferences .window-content {
    background-color: #fafafa;
}

.ty-preferences .nav-group-item.active {
    color: white;
    background: #999;
}

.menu-item-container a.menu-style-btn {
    background-color: #f5f8fa;
    background-image: linear-gradient( 180deg , hsla(0, 0%, 100%, 0.8), hsla(0, 0%, 100%, 0)); 
}


 @media print { @page {margin: 0 0 0 0;} body.typora-export {padding-left: 0; padding-right: 0;} #write {padding:0;}}
</style><title>Readme</title>
</head>
<body class='typora-export'><div class='typora-export-content'>
<div id='write'  class=''><h1 id='midi-utils-api-documentation'><span>MIDI Utils API Documentation</span></h1><p><span>updated for MIDI Utils 2.0, ©2025 Jeremy Bernstein</span></p><hr /><p><span>This project began as an attempt to rewrite some parts of Cockos&#39; high-level ReaScript MIDI API, correcting some bugs and improving some (at least from my perspective) less than ideal behaviors and restrictions. Once I finished the subset of features I needed for one of my recent projects, I decided to keep going and just do the rest.</span></p><p><span>With some minor exceptions, this API is drop-in compatible with Cockos&#39; API -- they can be used in parallel if necessary. I&#39;ve gone to some trouble to ensure that the behaviors, return values, etc. remain consistent (with some documented exceptions).</span></p><ul><li><p><code>MIDIUtils.MIDI_GetNote</code><span>() start and end ppq positions should be consistent with how REAPER itself handles note-on/note-off matching and duration determination.</span></p></li><li><p><code>MIDIUtils.MIDI_SetNote</code><span>() will no longer arbitrarily truncate or elongate overlapping notes under certain circumstances</span></p></li><li><p><code>MIDIUtils.MIDI_GetEvt</code><span>() doesn&#39;t confuse note-on and note-off messages under certain circumstances</span></p></li><li><p><code>MIDIUtils.MIDI_Get</code><span>/</span><code>Set</code><span>/</span><code>InsertNote</code><span>() support release velocity</span></p></li><li><p><span>Write operations (set/insert/delete) are by definition unsorted, as they occur in memory. The optional &#39;unsorted&#39; argument to several API functions has been dropped (will be ignored), and in the case of the note operations, has been replaced with a release velocity argument. Sorting occurs automatically post-commit.</span></p></li><li><p><span>API &#39;Write&#39; operations don&#39;t write back to REAPER until </span><code>MIDIUtils.MIDI_CommitWriteTransaction</code><span>() is called.</span></p></li><li><p><span>API &#39;Read&#39; operations are based on the data in memory, not the data in the take. If updates are potentially occuring in REAPER &#39;behind the back&#39; of the API (such as in a defer script), call</span><code>MIDIUtils.MIDI_InitializeTake</code><span>() every frame, or whenever you need to resync the in-memory data with the actual state of the take in REAPER.</span></p></li><li><p><span>&#39;Read&#39; operations don&#39;t require a transaction, and will generally trigger a </span><code>MIDIUtils.MIDI_InitializeTake</code><span>(take) event slurp if the requested take isn&#39;t already in memory.</span></p></li></ul><p><span>In general, for many projects, dropping down to the low-level </span><code>Get</code><span>/</span><code>SetAllEvts</code><span>() API is overkill and, for many developers, a terra incognita of status and data bytes in a 40-year-old serial specification. The high-level API is fairly well-designed and easily applicable to many, if not most MIDI scripting problems. But it&#39;s buggy and there doesn&#39;t appear to be much dev interest in solving these problems (some of which have been in the docket since 2016ish)</span>
<span>at the present time. So to make a long story short, I took some time to reimplement the very useful API in what Ihope is a more usable form (because fixed).</span></p><p><span>If the native API worked 100% correctly, there would be no point to this project, of course. My hope is that this replacement becomes obsolete at some point, when Cockos circles around to working on MIDI stuff again in some uncertain future. Until then, I hope this provides a useful interim solution to scripters struggling with the behavior and reliability of the native API.</span></p><hr /><p><span>USAGE:</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="lua" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="lua"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">-- get the package path to MIDIUtils in my repository</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-builtin">package.path</span> = <span class="cm-variable">reaper.GetResourcePath</span>() .. <span class="cm-string">'/Scripts/sockmonkey72 Scripts/MIDI/?.lua'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">local</span> <span class="cm-variable">mu</span> = <span class="cm-builtin">require</span> <span class="cm-string">'MIDIUtils'</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">-- true by default, enabling argument type-checking, turn off for 'production' code</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">-- mu.ENFORCE_ARGS = false -- or use mu.MIDIUtils.MIDI_InitializeTake(), see below</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">-- enable overlap correction</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">mu.CORRECT_OVERLAPS</span> = <span class="cm-keyword">true</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">-- by default, note-ons take precedence when calculating overlap correction</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">-- turn this on to favor selected notes' note-off instead</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-comment">-- mu.CORRECT_OVERLAPS_FAVOR_SELECTION = true</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">-- return early if something is missing (currently no dependencies)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">if</span> <span class="cm-keyword">not</span> <span class="cm-variable">mu.CheckDependencies</span>(<span class="cm-string">'My Script'</span>) <span class="cm-keyword">then</span> <span class="cm-keyword">return</span> <span class="cm-keyword">end</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">local</span> <span class="cm-variable">take</span> = <span class="cm-variable">reaper.MIDIEditor_GetTake</span>(<span class="cm-variable">MIDIEditor_GetActive</span>())</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">if</span> <span class="cm-keyword">not</span> <span class="cm-variable">take</span> <span class="cm-keyword">then</span> <span class="cm-keyword">return</span> <span class="cm-keyword">end</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">-- acquire events from take (can pass true/false as 2nd arg to enable/disable ENFORCE_ARGS)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">-- you will want to do this once per defer cycle in persistent scripts to ensure that the</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">-- internal state matches the current take state</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">mu.MIDI_InitializeTake</span>(<span class="cm-variable">take</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">-- inform the library that we'll be writing to this take</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">mu.MIDI_OpenWriteTransaction</span>(<span class="cm-variable">take</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">-- insert a note</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">mu.MIDI_InsertNote</span>(<span class="cm-variable">take</span>, <span class="cm-keyword">true</span>, <span class="cm-keyword">false</span>, <span class="cm-number">960</span>, <span class="cm-number">1920</span>, <span class="cm-number">0</span>, <span class="cm-number">64</span>, <span class="cm-number">64</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">-- insert a CC (using default CC curve)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">mu.MIDI_InsertCC</span>(<span class="cm-variable">take</span>, <span class="cm-keyword">true</span>, <span class="cm-keyword">false</span>, <span class="cm-number">960</span>, <span class="cm-number">0xB0</span>, <span class="cm-number">0</span>, <span class="cm-number">1</span>, <span class="cm-number">64</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">-- insert a CC, get new index (using default CC curve)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-keyword">local</span> <span class="cm-variable">_</span>, <span class="cm-variable">newidx</span> = <span class="cm-variable">mu.MIDI_InsertCC</span>(<span class="cm-variable">take</span>, <span class="cm-keyword">true</span>, <span class="cm-keyword">false</span>, <span class="cm-number">1200</span>, <span class="cm-number">0xB0</span>, <span class="cm-number">0</span>, <span class="cm-number">1</span>, <span class="cm-number">96</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">-- insert another CC (using default CC curve)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">mu.MIDI_InsertCC</span>(<span class="cm-variable">take</span>, <span class="cm-keyword">true</span>, <span class="cm-keyword">false</span>, <span class="cm-number">1440</span>, <span class="cm-number">0xB0</span>, <span class="cm-number">0</span>, <span class="cm-number">1</span>, <span class="cm-number">127</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">-- change the CC shape of the 2nd CC to bezier with a 0.66 tension</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">mu.MIDI_SetCCShape</span>(<span class="cm-variable">take</span>, <span class="cm-variable">newidx</span>, <span class="cm-number">5</span>, <span class="cm-number">0.66</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">-- commit the transaction to the take</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">-- &nbsp; by default, this won't reacquire the MIDI events and update the</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">-- &nbsp; take data in memory, pass 'true' as a 2nd argument if you want that</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">mu.MIDI_CommitWriteTransaction</span>(<span class="cm-variable">take</span>)</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">-- pass 'true' as a 3rd argument to MIDIUtils.MIDI_CommitWriteTransaction()</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-comment">-- &nbsp; to do this automatically</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;<span class="cm-variable">reaper.MarkTrackItemsDirty</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">reaper.GetMediaItemTake_Track</span>(<span class="cm-variable">take</span>),</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">reaper.GetMediaItemTake_Item</span>(<span class="cm-variable">take</span>))</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 1380px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1380px;"></div></div></div></pre><hr /><p><span>from ReaPack projects, you can include a copy of MIDIUtils.lua like this</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang=""><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang=""><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.5px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: currentcolor;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: currentcolor;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">@provides MyScriptFolder/MIDIUtils.lua https://raw.githubusercontent.com/jeremybernstein/ReaScripts/main/MIDI/MIDIUtils.lua</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom-width: 0px; border-bottom-style: solid; border-bottom-color: transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 69px;"></div></div></div></pre><p><span>which will grab the latest version of MIDIUtils.lua and place it in a project-specific folder</span>
<span>(the folder will be created if it doesn&#39;t already exist). If you include MIDIUtils like this, I would be happy for an acknowledgement of usage in your README.</span></p><hr /><p><strong><span>SetOnError</span></strong></p><p><span>	</span><code>MIDIUtils.SetOnError(fn)</code></p><ul><li><p><code>SetOnError</code><span>: set an optional error callback for xpcall(), otherwise a</span>
<span>traceback will be posted to the REAPER console window by default.</span></p></li></ul><p><strong><span>Return Values:</span></strong><span> none</span></p><p><code>boolean</code><span> rv =</span>
<span>	</span><code>MIDIUtils.CheckDependencies(callerScriptName)</code></p><ul><li><p><code>CheckDependencies</code><span>: check whether all MIDIUtils dependencies are met,</span>
<span>pass the name of your script as an argument, will be used as an</span>
<span>identifier in any error message generated.</span></p><p><strong><span>Return Values:</span></strong>
<code>boolean</code><span> rv: </span><code>true</code><span> if dependencies are met, </span><code>false</code><span> otherwise</span></p></li></ul><hr /><p><strong><span>MIDI_InitializeTake</span></strong></p><p><span>	</span><code>MIDIUtils.MIDI_InitializeTake</code><span>(take, enforceargs = </span><code>true</code><span>)</span></p><ul><li><p><code>MIDI_InitializeTake</code><span>: gather the events in a </span><code>MediaItem_Take</code><span> for use with MIDIUtils. In simple usage, this call is optional -- API calls will automatically call </span><code>MIDIUtils.MIDI_InitializeTake</code><span>() internally if the provided take is not already prepared.</span></p><p><code>NOTE</code><span>: if using MIDIUtils in a defer() script, you will want to call this once per defer cycle to ensure that the MIDIUtils internal state is synced with the take state. The optional &#39;enforceargs&#39; argument can be used to disable API argument type enforcement for efficiency in production code.</span></p><p><strong><span>Arguments:</span></strong>
<code>MediaItem_Take</code><span> take: the </span><code>MediaItem_Take</code><span> provided by REAPER</span></p><p><strong><span>Return Values:</span></strong><span> none</span></p></li></ul><p><strong><span>MIDI_CountEvts</span></strong></p><p><code>boolean</code><span> rv, </span><code>number</code><span> notecnt, </span><code>number</code><span> ccevtcnt, </span><code>number</code><span> textsyxevtcnt =</span>
<span>	</span><code>MIDIUtils.MIDI_CountEvts</code><span>(take)</span></p><ul><li><p><code>MIDI_CountEvts</code><span>: provide a count of take events by type.</span></p><p><strong><span>Arguments:</span></strong>
<code>MediaItem_Take</code><span> take: the </span><code>MediaItem_Take</code><span> provided by REAPER</span></p><p><strong><span>Return Values:</span></strong>
<code>boolean</code><span> rv: </span><code>true</code><span> if successful, </span><code>false</code><span> otherwise</span>
<code>number</code><span> notecnt: count of note-on events</span>
<code>number</code><span> ccevtcnt: count of CC, pitch bend, program change, aftertouch events</span>
<code>number</code><span> textsyxevtcnt: count of meta and system exclusive events (not including bezier curves)</span></p></li></ul><hr /><p><strong><span>MIDI_OpenWriteTransaction</span></strong></p><p><span>	</span><code>MIDIUtils.MIDI_OpenWriteTransaction</code><span>(take)</span></p><ul><li><p><code>MIDI_OpenWriteTransaction</code><span>: start a &#39;write&#39; transaction. MIDIUtils performs all</span>
<span>of its MIDI data manipulation in memory. Unlike Cockos&#39;</span>
<span>high-level MIDI API, there are no &#39;immediately sorted&#39;</span>
<span>API calls. To make changes to the data, you are required to</span>
<span>open a transaction, make all changes, and then commit the</span>
<span>transaction, which will write all changes in a single bulk set action.</span></p></li></ul><p><strong><span>Arguments:</span></strong>
<code>MediaItem_Take</code><span> take: the </span><code>MediaItem_Take</code><span> provided by REAPER</span></p><p><strong><span>Return Values:</span></strong><span> none</span></p><p><strong><span>MIDI_CommitWriteTransaction</span></strong></p><p><code>boolean</code><span> rv =</span>
<span>	</span><code>MIDIUtils.MIDI_CommitWriteTransaction</code><span>(take, refresh, dirty)</span></p><ul><li><p><code>MIDI_CommitWriteTransaction</code><span>: end a &#39;write&#39; transaction and commit the data to the take.</span></p><p><strong><span>Arguments:</span></strong>
<code>MediaItem_Take</code><span> take: the </span><code>MediaItem_Take</code><span> provided by REAPER</span>
<code>boolean</code><span> refresh: when true, MIDIUtils will re-initialize the take after commit</span>
<span>this is useful if you intend to perform further manipulation on the data post-commit</span>
<code>boolean</code><span> dirty: when true, MIDIUtils will dirty the take post-commit</span></p><p><strong><span>Return Values:</span></strong>
<code>boolean</code><span> rv: </span><code>true</code><span> on success, </span><code>false</code><span> otherwise</span></p></li></ul><hr /><p><strong><span>MIDI_CorrectOverlaps</span></strong></p><p><code>boolean</code><span> rv =</span>
<span>	</span><code>MIDIUtils.MIDI_CorrectOverlaps</code><span>(take, favorSelection)</span></p><ul><li><p><code>MIDI_CorrectOverlaps</code><span>: manually apply overlap correction to the current take. See also</span>
<span>MIDIUtils.CORRECT_OVERLAPS and MIDIUtils.CORRECT_OVERLAPS_FAVOR_SELECTION</span>
<span>for automatic overlap correction options.</span></p><p><strong><span>Arguments:</span></strong>
<code>MediaItem_Take</code><span> take: the </span><code>MediaItem_Take</code><span> provided by REAPER</span>
<code>boolean</code><span> favorSelection: when true, overlap correction will attempt to leave any selected</span>
<span>notes untouched (the note-on of position unselected note events will</span>
<span>be changed). When </span><code>false</code><span> (or missing), overlap correction will preserve</span>
<span>note-on positions and move note-offs to prevent MIDI overlaps. [optional]</span></p><p><strong><span>Return Values:</span></strong>
<code>boolean</code><span> rv: </span><code>true</code><span> on success, </span><code>false</code><span> otherwise</span></p></li></ul><hr /><p><strong><span>MIDI_GetNote</span></strong></p><p><code>boolean</code><span> rv, </span><code>boolean</code><span> selected, </span><code>boolean</code><span> muted, </span><code>number</code><span> ppqpos, </span><code>number</code><span> endppqpos, </span><code>number</code><span> chan, </span><code>number</code><span> pitch, </span><code>number</code><span> vel, </span><code>number</code><span> relvel =</span>
<span>	</span><code>MIDIUtils.MIDI_GetNote</code><span>(take, idx)</span></p><ul><li><p><code>MIDI_GetNote</code><span>: Get MIDI note properties.</span></p></li></ul><p><strong><span>Arguments:</span></strong>
<code>MediaItem_Take</code><span> take: the </span><code>MediaItem_Take</code><span> provided by REAPER</span>
<code>number</code><span> idx: note index (see </span><code>MIDIUtils.MIDI_CountEvts</code><span> for the  number of MIDI notes)</span></p><p><strong><span>Return Values:</span></strong>
<code>boolean</code><span> rv: </span><code>true</code><span> on success, </span><code>false</code><span> otherwise</span>
<code>boolean</code><span> selected: </span><code>true</code><span> if note is selected</span>
<code>boolean</code><span> muted: </span><code>true</code><span> if note is muted</span>
<code>number</code><span> ppqpos: note-on PPQ position</span>
<code>number</code><span> endppqpos: note-off PPQ position</span>
<code>number</code><span> chan: MIDI channel (0 - 15)</span>
<code>number</code><span> pitch: MIDI note number (0 - 127)</span>
<code>number</code><span> vel: note-on velocity (0 - 127)</span>
<code>number</code><span> relvel: note-off velocity (0 - 127)</span></p><p><strong><span>MIDI_SetNote</span></strong></p><p><code>boolean</code><span> rv =</span>
<span>	</span><code>MIDIUtils.MIDI_SetNote</code><span>(take, idx, selected, muted, ppqpos, endppqpos, chan, pitch, vel, relvel)</span></p><ul><li><p><code>MIDI_SetNote</code><span>: Set MIDI note properties for an existing event.</span></p><p><strong><span>Arguments:</span></strong>
<code>MediaItem_Take</code><span> take: the </span><code>MediaItem_Take</code><span> provided by REAPER</span>
<code>number</code><span> idx: note index to modify (see </span><code>MIDIUtils.MIDI_CountEvts</code><span> for the  number of MIDI notes)</span>
<code>boolean</code><span> selected: </span><code>true</code><span> if note is selected [optional]</span>
<code>boolean</code><span> muted: </span><code>true</code><span> if note is muted [optional]</span>
<code>number</code><span> ppqpos: note-on PPQ position [optional]</span>
<code>number</code><span> endppqpos: note-off PPQ position [optional]</span>
<code>number</code><span> chan: MIDI channel (0 - 15) [optional]</span>
<code>number</code><span> pitch: MIDI note number (0 - 127) [optional]</span>
<code>number</code><span> vel: note-on velocity (0 - 127) [optional]</span>
<code>number</code><span> relvel: note-off velocity (0 - 127) [optional]</span></p><p><strong><span>Return Values:</span></strong>
<code>boolean</code><span> rv: </span><code>true</code><span> on success, </span><code>false</code><span> otherwise</span></p></li></ul><p><strong><span>MIDI_InsertNote</span></strong></p><p><code>boolean</code><span> rv, idx =</span>
<span>	</span><code>MIDIUtils.MIDI_InsertNote</code><span>(take, selected, muted, ppqpos, endppqpos, chan, pitch, vel, relvel)</span></p><ul><li><p><code>MIDI_InsertNote</code><span>: Create a new MIDI note event.</span></p><p><strong><span>Arguments:</span></strong>
<code>MediaItem_Take</code><span> take: the </span><code>MediaItem_Take</code><span> provided by REAPER</span>
<code>boolean</code><span> selected: </span><code>true</code><span> if note is selected</span>
<code>boolean</code><span> muted: </span><code>true</code><span> if note is muted</span>
<code>number</code><span> ppqpos: note-on PPQ position</span>
<code>number</code><span> endppqpos: note-off PPQ position</span>
<code>number</code><span> chan: MIDI channel (0 - 15)</span>
<code>number</code><span> pitch: MIDI note number (0 - 127)</span>
<code>number</code><span> vel: note-on velocity (0 - 127)</span>
<code>number</code><span> relvel: note-off velocity (0 - 127) [optional, 0 if not provided]</span></p><p><strong><span>Return Values:</span></strong>
<code>boolean</code><span> rv: </span><code>true</code><span> on success, </span><code>false</code><span> otherwise</span>
<code>number</code><span> idx: new note index</span></p></li></ul><p><strong><span>MIDI_DeleteNote</span></strong></p><p><code>boolean</code><span> rv =</span>
<span>	</span><code>MIDIUtils.MIDI_DeleteNote</code><span>(take, idx)</span></p><ul><li><p><code>MIDI_DeleteNote</code><span>: Delete a note event.</span></p><p><strong><span>Arguments:</span></strong>
<code>MediaItem_Take</code><span> take: the </span><code>MediaItem_Take</code><span> provided by REAPER</span>
<code>number</code><span> idx: note index to delete (see </span><code>MIDIUtils.MIDI_CountEvts</code><span> for the  number of MIDI notes)</span>
<strong><span>Return Values:</span></strong>
<code>boolean</code><span> rv: </span><code>true</code><span> on success, </span><code>false</code><span> otherwise</span></p></li></ul><hr /><p><strong><span>MIDI_GetCC</span></strong></p><p><code>boolean</code><span> rv, </span><code>boolean</code><span> selected, </span><code>boolean</code><span> muted, </span><code>number</code><span> ppqpos, </span><code>number</code><span> chanmsg, </span><code>number</code><span> chan, </span><code>number</code><span> msg2, </span><code>number</code><span> msg3 =</span>
<span>	</span><code>MIDIUtils.MIDI_GetCC</code><span>(take, idx)</span></p><ul><li><p><code>MIDI_GetCC</code><span>: Get CC/channel message properties.</span></p><p><strong><span>Arguments:</span></strong>
<code>MediaItem_Take</code><span> take: the </span><code>MediaItem_Take</code><span> provided by REAPER</span>
<code>number</code><span> idx: note index (see </span><code>MIDIUtils.MIDI_CountEvts</code><span> for the  number of MIDI notes)</span>
<strong><span>Return Values:</span></strong></p><p><code>boolean</code><span> rv: </span><code>true</code><span> on success, </span><code>false</code><span> otherwise</span>
<code>boolean</code><span> selected: </span><code>true</code><span> if event is selected</span>
<code>boolean</code><span> muted: </span><code>true</code><span> if event is muted</span>
<code>number</code><span> ppqpos: event PPQ position</span>
<code>number</code><span> chanmsg: message type:</span></p><ul><li><p><span>0xA0 - poly pressure / aftertouch</span></p></li><li><p><span>0xB0 - continuous controller</span></p></li><li><p><span>0xC0 - program change [* only requires 2 bytes]</span></p></li><li><p><span>0xD0 - channel pressure / aftertouch [* only requires 2 bytes]</span></p></li><li><p><span>0xE0 - pitch bend</span></p></li></ul><p><code>number</code><span> chan: MIDI channel (0 - 15)</span>
<code>number</code><span> msg2: 2nd message byte (0 - 127)</span>
<code>number</code><span> msg3: 3rd message byte (0 - 127)</span></p></li></ul><p><strong><span>SetCC</span></strong></p><p><code>boolean</code><span> rv =</span>
<span>	</span><code>MIDIUtils.MIDI_SetCC</code><span>(take, idx, selected, muted, ppqpos, chanmsg, chan, msg2, msg3)</span></p><ul><li><p><code>MIDI_SetCC</code><span>: Set CC/channel message properties for an existing event.</span></p><p><strong><span>Arguments:</span></strong>
<code>MediaItem_Take</code><span> take: the </span><code>MediaItem_Take</code><span> provided by REAPER</span>
<code>number</code><span> idx: CC event index to modify (see </span><code>MIDIUtils.MIDI_CountEvts</code><span> for the  number of CC-like events)</span>
<code>boolean</code><span> selected: </span><code>true</code><span> if event is selected [optional]</span>
<code>boolean</code><span> muted: </span><code>true</code><span> if event is muted [optional]</span>
<code>number</code><span> ppqpos: event PPQ position [optional]</span>
<code>number</code><span> chanmsg: message type [optional]:</span></p><ul><li><p><span>0xA0 - poly pressure / aftertouch</span></p></li><li><p><span>0xB0 - continuous controller</span></p></li><li><p><span>0xC0 - program change [* only requires 2 bytes]</span></p></li><li><p><span>0xD0 - channel pressure / aftertouch [* only requires 2 bytes]</span></p></li><li><p><span>0xE0 - pitch bend</span></p></li></ul><p><code>number</code><span> chan: MIDI channel (0 - 15) [optional]</span>
<code>number</code><span> msg2: 2nd message byte (0 - 127) [optional]</span>
<code>number</code><span> msg3: 3rd message byte (0 - 127) [optional]</span></p><p><strong><span>Return Values:</span></strong>
<code>boolean</code><span> rv: </span><code>true</code><span> on success, </span><code>false</code><span> otherwise</span></p></li></ul><p><strong><span>MIDI_InsertCC</span></strong></p><p><code>boolean</code><span> rv, </span><code>number</code><span> idx =</span>
<span>	</span><code>MIDIUtils.MIDI_InsertCC</code><span>(take, selected, muted, ppqpos, chanmsg, chan, msg2, msg3)</span></p><ul><li><p><code>MIDI_InsertCC</code><span>: Create a new CC/channel message event.</span></p><p><strong><span>Arguments:</span></strong>
<code>MediaItem_Take</code><span> take: the </span><code>MediaItem_Take</code><span> provided by REAPER</span>
<code>boolean</code><span> selected: </span><code>true</code><span> if event is selected</span>
<code>boolean</code><span> muted: </span><code>true</code><span> if event is muted</span>
<code>number</code><span> ppqpos: PPQ position</span>
<code>number</code><span> chanmsg: message type:</span></p><ul><li><p><span>0xA0 - poly pressure / aftertouch</span></p></li><li><p><span>0xB0 - continuous controller</span></p></li><li><p><span>0xC0 - program change [* only requires 2 bytes]</span></p></li><li><p><span>0xD0 - channel pressure / aftertouch [* only requires 2 bytes]</span></p></li><li><p><span>0xE0 - pitch bend</span></p></li></ul><p><code>number</code><span> chan: MIDI channel (0 - 15)</span>
<code>number</code><span> msg2: 2nd message byte (0 - 127)</span>
<code>number</code><span> msg3: 3rd message byte (0 - 127)</span></p><p><strong><span>Return Values:</span></strong>
<code>boolean</code><span> rv: </span><code>true</code><span> on success, </span><code>false</code><span> otherwise</span>
<code>number</code><span> idx: new CC event index</span></p></li></ul><p><strong><span>MIDI_DeleteCC</span></strong></p><p><code>boolean</code><span> rv =</span>
<span>	</span><code>MIDIUtils.MIDI_DeleteCC</code><span>(take, idx)</span></p><ul><li><p><code>MIDI_DeleteCC</code><span>: Delete a CC/channel message event.</span></p><p><strong><span>Arguments:</span></strong>
<code>MediaItem_Take</code><span> take: the </span><code>MediaItem_Take</code><span> provided by REAPER</span>
<code>number</code><span> idx: CC event index to delete (see </span><code>MIDIUtils.MIDI_CountEvts</code><span> for the  number of CC-like events)</span></p><p><strong><span>Return Values:</span></strong>
<code>boolean</code><span> rv: </span><code>true</code><span> on success, </span><code>false</code><span> otherwise</span></p></li></ul><hr /><p><strong><span>MIDI_GetCCShape</span></strong></p><p><code>boolean</code><span> rv, </span><code>number</code><span> shape, </span><code>number</code><span> beztension =</span>
<span>	</span><code>MIDIUtils.MIDI_GetCCShape</code><span>(take, idx)</span></p><ul><li><p><code>MIDI_GetCCShape</code><span>: Get CC shape and bezier tension.</span></p><p><strong><span>Arguments:</span></strong>
<code>MediaItem_Take</code><span> take: the </span><code>MediaItem_Take</code><span> provided by REAPER</span>
<code>number</code><span> idx: CC event index to query</span></p><p><strong><span>Return Values:</span></strong>
<code>boolean</code><span> rv: </span><code>true</code><span> on success, </span><code>false</code><span> otherwise</span>
<code>number</code><span> shape: curve shape</span></p><ul><li><p><span>0 - square</span></p></li><li><p><span>1 - linear</span></p></li><li><p><span>2 - slow start/end</span></p></li><li><p><span>3 - fast start</span></p></li><li><p><span>4 - fast end</span></p></li><li><p><span>5 - bezier</span></p></li></ul><p><code>number</code><span> beztension: bezier tension</span></p></li></ul><p><strong><span>MIDI_SetCCShape</span></strong></p><p><code>boolean</code><span> rv =</span>
<span>	</span><code>MIDIUtils.MIDI_SetCCShape</code><span>(take, idx, shape, beztension)</span></p><ul><li><p><code>MIDI_SetCCShape</code><span>: Set CC shape and bezier tension.</span></p><p><strong><span>Arguments:</span></strong>
<code>MediaItem_Take</code><span> take: the </span><code>MediaItem_Take</code><span> provided by REAPER</span>
<code>number</code><span> idx: CC event index to query</span>
<code>number</code><span> shape: curve shape</span></p><ul><li><p><span>0 - square</span></p></li><li><p><span>1 - linear</span></p></li><li><p><span>2 - slow start/end</span></p></li><li><p><span>3 - fast start</span></p></li><li><p><span>4 - fast end</span></p></li><li><p><span>5 - bezier</span></p></li></ul><p><code>number</code><span> beztension: bezier tension [required for shape 5 (bezier)]</span></p><p><strong><span>Return Values:</span></strong>
<code>boolean</code><span> rv: </span><code>true</code><span> on success, </span><code>false</code><span> otherwise</span></p></li></ul><hr /><p><strong><span>MIDI_GetTextSysexEvt</span></strong></p><p><code>boolean</code><span> rv, </span><code>boolean</code><span> selected, </span><code>boolean</code><span> muted, </span><code>number</code><span> ppqpos, </span><code>number</code><span> type, </span><code>string</code><span> msg =</span>
<span>	</span><code>MIDIUtils.MIDI_GetTextSysexEvt</code><span>(take, idx)</span></p><ul><li><p><code>MIDI_GetTextSysexEvt</code><span>: Get meta / system exclusive message properties.</span></p><p><strong><span>Arguments:</span></strong>
<code>MediaItem_Take</code><span> take: the </span><code>MediaItem_Take</code><span> provided by REAPER</span>
<code>number</code><span> idx: event index (see </span><code>MIDIUtils.MIDI_CountEvts</code><span> for the  number of meta / sysex events)</span></p><p><strong><span>Return Values:</span></strong>
<code>boolean</code><span> rv: </span><code>true</code><span> on success, </span><code>false</code><span> otherwise</span>
<code>boolean</code><span> selected: </span><code>true</code><span> if event is selected</span>
<code>boolean</code><span> muted: </span><code>true</code><span> if event is muted</span>
<code>number</code><span> ppqpos: event PPQ position</span>
<code>number</code><span> type: message type</span></p><ul><li><p><span>-1 - system exclusive</span></p></li><li><p><span>1 - 14: meta text event:</span></p><ul><li><p><span>1 - text</span></p></li><li><p><span>2 - copyright notice</span></p></li><li><p><span>3 - track name</span></p></li><li><p><span>4 - instrument name</span></p></li><li><p><span>5 - lyrics</span></p></li><li><p><span>6 - marker</span></p></li><li><p><span>7 - cue point</span></p></li><li><p><span>8 - program name</span></p></li><li><p><span>9 - device name</span></p></li><li><p><span>10 - 14: REAPER-specific, undocumented</span></p></li></ul></li><li><p><span>15: REAPER notation event</span></p></li></ul><p><code>string</code><span> msg: message payload (no header or footer bytes)</span></p></li></ul><p><strong><span>MIDI_SetTextSysexEvt</span></strong></p><p><code>boolean</code><span> rv =</span>
<span>	</span><code>MIDIUtils.MIDI_SetTextSysexEvt</code><span>(take, idx, selected, muted, ppqpos, type, msg)</span></p><ul><li><p><code>MIDI_SetTextSysexEvt</code><span>: Set meta / system exclusive message properties for an existing event.</span></p><p><strong><span>Arguments:</span></strong>
<code>MediaItem_Take</code><span> take: the </span><code>MediaItem_Take</code><span> provided by REAPER</span>
<code>number</code><span> idx: event index (see </span><code>MIDIUtils.MIDI_CountEvts</code><span> for the  number of meta / sysex events)</span>
<code>boolean</code><span> selected: </span><code>true</code><span> if event is selected [optional]</span>
<code>boolean</code><span> muted: </span><code>true</code><span> if event is muted [optional]</span>
<code>number</code><span> ppqpos: event PPQ position [optional]</span>
<code>number</code><span> type: message type [optional, required if msg is provided]</span></p><ul><li><p><span>-1 - system exclusive</span></p></li><li><p><span>1 - 14: meta text event:</span></p><ul><li><p><span>1 - text</span></p></li><li><p><span>2 - copyright notice</span></p></li><li><p><span>3 - track name</span></p></li><li><p><span>4 - instrument name</span></p></li><li><p><span>5 - lyrics</span></p></li><li><p><span>6 - marker</span></p></li><li><p><span>7 - cue point</span></p></li><li><p><span>8 - program name</span></p></li><li><p><span>9 - device name</span></p></li><li><p><span>10 - 14: REAPER-specific, undocumented</span></p></li></ul></li><li><p><span>15: REAPER notation event</span></p></li></ul><p><code>string</code><span> msg: message payload (no header or footer bytes) [optional, required if type is provided]</span></p><p><strong><span>Return Values:</span></strong>
<code>boolean</code><span> rv: </span><code>true</code><span> on success, </span><code>false</code><span> otherwise</span></p></li></ul><p><strong><span>MIDI_InsertTextSysexEvt</span></strong></p><p><code>boolean</code><span> rv, </span><code>number</code><span> idx =</span>
<span>	</span><code>MIDIUtils.MIDI_InsertTextSysexEvt</code><span>(take, selected, muted, ppqpos, type, bytestr)</span></p><ul><li><p><code>MIDI_InsertTextSysexEvt</code><span>: Create a new meta / system exclusive message event.</span></p><p><strong><span>Arguments:</span></strong>
<code>MediaItem_Take</code><span> take: the </span><code>MediaItem_Take</code><span> provided by REAPER</span>
<code>boolean</code><span> selected: </span><code>true</code><span> if event is selected</span>
<code>boolean</code><span> muted: </span><code>true</code><span> if event is muted</span>
<code>number</code><span> ppqpos: PPQ position</span>
<code>number</code><span> type: message type</span></p><ul><li><p><span>-1 - system exclusive</span></p></li><li><p><span>1 - 14: meta text event:</span></p><ul><li><p><span>1 - text</span></p></li><li><p><span>2 - copyright notice</span></p></li><li><p><span>3 - track name</span></p></li><li><p><span>4 - instrument name</span></p></li><li><p><span>5 - lyrics</span></p></li><li><p><span>6 - marker</span></p></li><li><p><span>7 - cue point</span></p></li><li><p><span>8 - program name</span></p></li><li><p><span>9 - device name</span></p></li><li><p><span>10 - 14: REAPER-specific, undocumented</span></p></li></ul></li><li><p><span>15: REAPER notation event</span></p></li></ul><p><code>string</code><span> msg: message payload (no header or footer bytes)</span></p><p><strong><span>Return Values:</span></strong>
<code>boolean</code><span> rv: </span><code>true</code><span> on success, </span><code>false</code><span> otherwise</span>
<code>number</code><span> idx: new CC event index</span></p></li></ul><p><strong><span>MIDI_DeleteTextSysexEvt</span></strong></p><p><code>boolean</code><span> rv =</span>
<span>	</span><code>MIDIUtils.MIDI_DeleteTextSysexEvt</code><span>(take, idx)</span></p><ul><li><p><code>MIDI_DeleteTextSysexEvt</code><span>: Delete a meta / system exclusive message event.</span></p><p><strong><span>Arguments:</span></strong>
<code>MediaItem_Take</code><span> take: the </span><code>MediaItem_Take</code><span> provided by REAPER</span>
<code>number</code><span> idx: event index to delete (see </span><code>MIDIUtils.MIDI_CountEvts</code><span> for the  number of meta / sysex events)</span></p><p><strong><span>Return Values:</span></strong>
<code>boolean</code><span> rv: </span><code>true</code><span> on success, </span><code>false</code><span> otherwise</span></p></li></ul><hr /><p><strong><span>MIDI_GetEvt</span></strong></p><p><code>boolean</code><span> rv, </span><code>boolean</code><span> selected, </span><code>boolean</code><span> muted, </span><code>number</code><span> ppqpos, </span><code>string</code><span> msg =</span>
<span>	</span><code>MIDIUtils.MIDI_GetEvt</code><span>(take, idx)</span></p><ul><li><p><code>MIDI_GetEvt</code><span>: Get event properties.</span></p></li></ul><p><strong><span>Arguments:</span></strong>
<code>MediaItem_Take</code><span> take: the </span><code>MediaItem_Take</code><span> provided by REAPER</span>
<code>number</code><span> idx: event index (see </span><code>MIDIUtils.MIDI_CountEvts</code><span> for event count)</span></p><p><strong><span>Return Values:</span></strong>
<code>boolean</code><span> rv: </span><code>true</code><span> on success, </span><code>false</code><span> otherwise</span>
<code>boolean</code><span> selected: </span><code>true</code><span> if event is selected</span>
<code>boolean</code><span> muted: </span><code>true</code><span> if event is muted</span>
<code>number</code><span> ppqpos: event PPQ position</span>
<code>string</code><span> msg: complete message payload (incl. status, header and/or footer bytes)</span></p><p><strong><span>MIDI_SetEvt</span></strong></p><p><code>boolean</code><span> rv =</span>
<span>	</span><code>MIDIUtils.MIDI_SetEvt</code><span>(take, idx, selected, muted, ppqpos, msg)</span></p><ul><li><p><code>MIDI_SetEvt</code><span>: Set event properties for an existing event.</span></p><p><strong><span>Arguments:</span></strong>
<code>MediaItem_Take</code><span> take: the </span><code>MediaItem_Take</code><span> provided by REAPER</span>
<code>number</code><span> idx: event index (see </span><code>MIDIUtils.MIDI_CountEvts</code><span> for event count)</span>
<code>boolean</code><span> selected: </span><code>true</code><span> if event is selected [optional]</span>
<code>boolean</code><span> muted: </span><code>true</code><span> if event is muted [optional]</span>
<code>number</code><span> ppqpos: event PPQ position [optional]</span>
<code>string</code><span> msg: complete message payload (incl. status, header and/or footer bytes) [optional]</span></p><p><strong><span>Return Values:</span></strong>
<code>boolean</code><span> rv: </span><code>true</code><span> on success, </span><code>false</code><span> otherwise</span></p></li></ul><p><strong><span>MIDI_InsertEvt</span></strong></p><p><code>boolean</code><span> rv, </span><code>number</code><span> idx =</span>
<span>	</span><code>MIDIUtils.MIDI_InsertEvt</code><span>(take, selected, muted, ppqpos, bytestr)</span></p><ul><li><p><code>MIDI_SetEvt</code><span>: Insert new event.</span></p><p><strong><span>Arguments:</span></strong>
<code>MediaItem_Take</code><span> take: the </span><code>MediaItem_Take</code><span> provided by REAPER</span>
<code>boolean</code><span> selected: </span><code>true</code><span> if event is selected</span>
<code>boolean</code><span> muted: </span><code>true</code><span> if event is muted</span>
<code>number</code><span> ppqpos: event PPQ position</span>
<code>string</code><span> msg: complete message payload (incl. status, header and/or footer bytes)</span></p><p><strong><span>Return Values:</span></strong>
<code>boolean</code><span> rv: </span><code>true</code><span> on success, </span><code>false</code><span> otherwise</span></p></li></ul><p><strong><span>MIDI_DeleteEvt</span></strong></p><p><code>boolean</code><span> rv =</span>
<span>	</span><code>MIDIUtils.MIDI_DeleteEvt</code><span>(take, idx)</span></p><ul><li><p><code>MIDI_DeleteEvt</code><span>: Delete an event.</span></p><p><strong><span>Arguments:</span></strong>
<code>MediaItem_Take</code><span> take: the </span><code>MediaItem_Take</code><span> provided by REAPER</span>
<code>number</code><span> idx: event index (see </span><code>MIDIUtils.MIDI_CountEvts</code><span> for event count)</span></p><p><strong><span>Return Values:</span></strong>
<code>boolean</code><span> rv: </span><code>true</code><span> on success, </span><code>false</code><span> otherwise</span></p></li></ul><hr /><p><strong><span>MIDI_EnumSelNotes</span></strong></p><p><code>number</code><span> idx =</span>
<span>	</span><code>MIDIUtils.MIDI_EnumSelNotes</code><span>(take, idx)</span></p><ul><li><p><code>MIDI_EnumSelNotes</code><span>: Returns the index of the next selected MIDI note event after idx (-1 if there are no more selected events).</span></p><p><strong><span>Arguments:</span></strong>
<code>MediaItem_Take</code><span> take: the </span><code>MediaItem_Take</code><span> provided by REAPER</span>
<code>number</code><span> idx: event index (pass -1 to get the first selected note event)</span></p><p><strong><span>Return Values:</span></strong>
<code>integer</code><span> idx: index of next selected MIDI Note event</span></p></li></ul><p><strong><span>MIDI_EnumSelCC</span></strong></p><p><code>number</code><span> idx =</span>
<span>	</span><code>MIDIUtils.MIDI_EnumSelCC</code><span>(take, idx)</span></p><ul><li><p><code>MIDI_EnumSelCC</code><span>: Returns the index of the next selected MIDI CC event after idx (-1 if there are no more selected events).</span></p><p><strong><span>Arguments:</span></strong>
<code>MediaItem_Take</code><span> take: the </span><code>MediaItem_Take</code><span> provided by REAPER</span>
<code>number</code><span> idx: event index (pass -1 to get the first selected CC event)</span></p><p><strong><span>Return Values:</span></strong>
<code>integer</code><span> idx: index of next selected MIDI CC event</span></p></li></ul><p><strong><span>MIDI_EnumSelTextSysexEvts</span></strong></p><p><code>number</code><span> idx =</span>
<span>	</span><code>MIDIUtils.MIDI_EnumSelTextSysexEvts</code><span>(take, idx)</span></p><ul><li><p><code>MIDI_EnumSelCC</code><span>: Returns the index of the next selected MIDI meta / system exclusive event after idx (-1 if there are no more selected events).</span></p><p><strong><span>Arguments:</span></strong>
<code>MediaItem_Take</code><span> take: the </span><code>MediaItem_Take</code><span> provided by REAPER</span>
<code>number</code><span> idx: event index (pass -1 to get the first selected meta / sysex event)</span></p><p><strong><span>Return Values:</span></strong>
<code>integer</code><span> idx: index of next selected MIDI meta / sysex event</span></p></li></ul><p><strong><span>MIDI_EnumSelEvts</span></strong></p><p><code>number</code><span> idx =</span>
<span>	</span><code>MIDIUtils.MIDI_EnumSelEvts</code><span>(take, idx)</span></p><ul><li><p><code>MIDI_EnumSelCC</code><span>: Returns the index of the next selected event after idx (-1 if there are no more selected events).</span></p><p><strong><span>Arguments:</span></strong>
<code>MediaItem_Take</code><span> take: the </span><code>MediaItem_Take</code><span> provided by REAPER</span>
<code>number</code><span> idx: event index (pass -1 to get the first selected event)</span></p><p><strong><span>Return Values:</span></strong>
<code>integer</code><span> idx: index of next selected event of any type (note-on, note-off, CC, meta/sysex)</span></p></li></ul><hr /><p><strong><span>MIDI_CountAllEvts</span></strong></p><p><code>number</code><span> allcnt =</span>
<span>	</span><code>MIDIUtils.MIDI_CountAllEvts</code><span>(take)</span></p><ul><li><p><code>MIDI_CountEvts</code><span>: provide a count of all take events.</span></p><p><strong><span>Arguments:</span></strong>
<code>MediaItem_Take</code><span> take: the </span><code>MediaItem_Take</code><span> provided by REAPER</span></p><p><strong><span>Return Values:</span></strong>
<code>integer</code><span> allcnt: count of all events (note-on, note-off, CC, meta/sysex)</span></p></li></ul><hr /><p><strong><span>MIDI_EnumNotes</span></strong></p><p><code>number</code><span> idx =</span>
<span>	</span><code>MIDIUtils.MIDI_EnumNotes</code><span>(take, idx)</span></p><ul><li><p><code>MIDI_EnumNotes</code><span>: Returns the index of the next MIDI note event after idx (-1 if there are no more events).</span></p><p><strong><span>Arguments:</span></strong>
<code>MediaItem_Take</code><span> take: the </span><code>MediaItem_Take</code><span> provided by REAPER</span>
<code>number</code><span> idx: event index (pass -1 to get the first note event)</span></p><p><strong><span>Return Values:</span></strong>
<code>integer</code><span> idx: index of next MIDI Note event</span></p></li></ul><p><strong><span>MIDI_EnumCC</span></strong></p><p><code>number</code><span> idx =</span>
<span>	</span><code>MIDIUtils.MIDI_EnumCC</code><span>(take, idx)</span></p><ul><li><p><code>MIDI_EnumCC</code><span>: Returns the index of the next MIDI CC event after idx (-1 if there are no more events).</span></p><p><strong><span>Arguments:</span></strong>
<code>MediaItem_Take</code><span> take: the </span><code>MediaItem_Take</code><span> provided by REAPER</span>
<code>number</code><span> idx: event index (pass -1 to get the first CC event)</span></p><p><strong><span>Return Values:</span></strong>
<code>integer</code><span> idx: index of next MIDI CC event</span></p></li></ul><p><strong><span>MIDI_EnumTextSysexEvts</span></strong></p><p><code>number</code><span> idx =</span>
<span>	</span><code>MIDIUtils.MIDI_EnumTextSysexEvts</code><span>(take, idx)</span></p><ul><li><p><code>MIDI_EnumTextSysexEvts</code><span>: Returns the index of the next MIDI meta / system exclusive event after idx (-1 if there are no more events).</span></p><p><strong><span>Arguments:</span></strong>
<code>MediaItem_Take</code><span> take: the </span><code>MediaItem_Take</code><span> provided by REAPER</span>
<code>number</code><span> idx: event index (pass -1 to get the first meta/sysex event)</span></p><p><strong><span>Return Values:</span></strong>
<code>integer</code><span> idx: index of next MIDI meta/sysex event</span></p></li></ul><p><strong><span>MIDI_EnumEvts</span></strong></p><p><code>number</code><span> idx =</span>
<code>MIDIUtils.MIDI_EnumEvts</code><span>(take, idx)</span></p><ul><li><p><code>MIDI_EnumEvts</code><span>: Returns the index of the next event after idx (-1 if there are no more events).</span></p><p><strong><span>Arguments:</span></strong>
<code>MediaItem_Take</code><span> take: the </span><code>MediaItem_Take</code><span> provided by REAPER</span>
<code>number</code><span> idx: event index (pass -1 to get the first event)</span></p><p><strong><span>Return Values:</span></strong>
<code>integer</code><span> idx: index of next event of any type (note-on, note-off, CC, meta/sysex)</span></p></li></ul><hr /><p><strong><span>MIDI_GetCCValueAtTime</span></strong></p><p><code>boolean</code><span> rv, </span><code>number</code><span> val, </span><code>number</code><span> ppqpos, </span><code>integer</code><span> chanmsg, </span><code>integer</code><span> chan, </span><code>integer</code><span> msg2out, </span><code>integer</code><span> msg3out =</span>
<span>	</span><code>MIDIUtils.MIDI_GetCCValueAtTime</code><span>(take, chanmsg, chan, msg2, time)</span></p><ul><li><p><code>MIDI_GetCCValueAtTime</code><span>: Get the effective CC value at a given time position, applying any curve.</span></p><p><strong><span>Arguments:</span></strong>
<code>MediaItem_Take</code><span> take: the </span><code>MediaItem_Take</code><span> provided by REAPER</span>
<code>number</code><span> chanmsg: message type:</span></p><ul><li><p><span>0xA0 - poly pressure / aftertouch</span></p></li><li><p><span>0xB0 - continuous controller</span></p></li><li><p><span>0xC0 - program change [* only requires 2 bytes]</span></p></li><li><p><span>0xD0 - channel pressure / aftertouch [* only requires 2 bytes]</span></p></li><li><p><span>0xE0 - pitch bend</span></p></li></ul><p><code>number</code><span> chan: MIDI channel (0 - 15)</span>
<code>number</code><span> msg2: 2nd message byte (0 - 127)</span>
<span>     e.g. the CC# or poly aftertouch note#</span>
<span>     [unused for program change, channel pressure and pitch bend types]</span>
<code>number</code><span> time: project time in seconds (as returned by </span><code>reaper.GetCursorPosition</code><span>() or similar)</span></p><p><strong><span>Return Values:</span></strong>
<code>boolean</code><span> rv: </span><code>true</code><span> on success, </span><code>false</code><span> otherwise</span>
<code>number</code><span> val: the effective CC value at the given time position (floating-point, interpolated)</span>
<code>number</code><span> ppqpos: PPQ position in the take of the requested time</span>
<code>integer</code><span> chanmsg: the message type (generally the same as was passed in)</span>
<code>integer</code><span> chan: MIDI channel (0 - 15) (the same as was passed in)</span>
<code>integer</code><span> msg2out: the 2nd MIDI byte for the controller message</span>
<code>integer</code><span> msg3out: the 3rd MIDI byte for the controller message</span></p></li></ul><hr /><p><strong><span>MIDI_NoteNumberToNoteName</span></strong></p><p><code>string</code><span> notename =</span>
<span>	</span><code>MIDIUtils.MIDI_NoteNumberToNoteName</code><span>(notenum, names = { &#39;C&#39;, &#39;C#&#39;, &#39;D&#39;, &#39;D#&#39;, &#39;E&#39;, &#39;F&#39;, &#39;F#&#39;, &#39;G&#39;, &#39;G#&#39;, &#39;A&#39;, &#39;A#&#39;, &#39;B&#39; })</span></p><ul><li><p><code>MIDI_NoteNumberToNoteName</code><span>: Returns the note name + octave (i.e. A3, D#-1) of the provided MIDI note number. Takes REAPER&#39;s MIDI octave name display offset preference into account.</span></p></li></ul><p><strong><span>Arguments:</span></strong>
<code>number</code><span> notenum: MIDI note number (0 - 127)</span>
<code>table</code><span> names: table of 12 pitch class names, from C - B, as they should be used for display [optional]</span></p><p><strong><span>Return Values:</span></strong><span> note name + octave string for the input value</span></p><p><strong><span>MIDI_NoteNameToNoteNumber</span></strong></p><p><code>integer</code><span> notenum =</span>
<span>	</span><code>MIDI_NoteNameToNoteNumber</code><span>(notename, names = { &#39;C&#39;, &#39;C#&#39;, &#39;D&#39;, &#39;D#&#39;, &#39;E&#39;, &#39;F&#39;, &#39;F#&#39;, &#39;G&#39;, &#39;G#&#39;, &#39;A&#39;, &#39;A#&#39;, &#39;B&#39; })</span></p><ul><li><p><code>MIDI_NoteNameToNoteNumber</code><span>: returns the MIDI note number from a provided note name + octave (i.e. A3, D#-1), taking REAPER&#39;s MIDI octave name display offset preference into account.</span></p><p><strong><span>Arguments:</span></strong></p><p><code>string</code><span> notename: the note name + octave for conversion</span>
<code>table</code><span> names: table of 12 pitch class names, from C - B, as they should be used for display [optional]</span></p></li></ul><p><strong><span>MIDI_GetPPQ</span></strong></p><p><code>number</code><span> ppq =</span>
<span>	</span><code>MIDIUtils.MIDI_GetPPQ</code><span>(take)</span></p><ul><li><p><code>MIDI_GetPPQ</code><span>: Returns the PPQ of the provided take.</span></p></li><li><p><strong><span>Arguments:</span></strong>
<code>MediaItem_Take</code><span> take: the </span><code>MediaItem_Take</code><span> provided by REAPER</span></p></li><li><p><strong><span>Return Values:</span></strong>
<code>number</code><span> ppq: PPQ value (parts (ticks) per quarter note) of the provided take</span></p></li></ul><p><strong><span>MIDI_SelectAll</span></strong></p><p><span>	</span><code>MIDIUtils.MIDI_SelectAll</code><span>(take, wantsSelect)</span></p><ul><li><p><code>MIDI_SelectAll</code><span>: Select or deselect all MIDI content in the provided take.</span></p><p><strong><span>Arguments:</span></strong>
<code>MediaItem_Take</code><span> take: the </span><code>MediaItem_Take</code><span> provided by REAPER</span>
<code>boolean</code><span> wantsSelect: select (true) or deselect (false)</span></p><p><strong><span>Return Values:</span></strong><span> none</span></p></li></ul><hr /><p><strong><span>post</span></strong></p><p><span>	</span><code>MIDIUtils.post</code><span>(...)</span></p><ul><li><p><code>post</code><span>: Convenience method to post a message (or comma-delimited messages) to the REAPER console.</span></p></li></ul><p><strong><span>p</span></strong></p><p><span>	</span><code>MIDIUtils.p</code><span>(...)</span></p><ul><li><p><code>p</code><span>: Convenience method to post a message (or comma-delimited messages) to the REAPER console.</span></p></li></ul><p><strong><span>tprint</span></strong></p><p><span>	</span><code>MIDIUtils.tprint</code><span>(table)</span></p><ul><li><p><code>tprint</code><span>: Convenience method to print the contents of a Lua table to the REAPER console.</span></p><p><strong><span>Arguments:</span></strong>
<code>table</code><span> table: a Lua table</span></p></li></ul><p><strong><span>tableCopy</span></strong></p><p><span>	</span><code>MIDIUtils.tableCopy</code><span>(table)</span></p><ul><li><p><code>tableCopy</code><span>: makes a deep copy of a Lua table, only applicable for tables </span><em><span>without</span></em><span> table keys.</span></p><p><strong><span>Arguments:</span></strong>
<code>table</code><span> table: a Lua table</span></p><p><strong><span>Return Values:</span></strong>
<code>table</code><span> newTable: a unique copy of the input table, containing unique values which no longer refer to the source table.</span></p></li></ul><p><strong><span>MIDI_GetState</span></strong></p><p><span>	</span><code>MIDIUtils.MIDI_GetState</code><span>()</span></p><ul><li><p><code>MIDI_GetState</code><span>: collects the current state of MIDIUtils, including all events, iteration states, etc. into a table.</span></p><p><strong><span>Arguments:</span></strong><span> none</span></p><p><strong><span>Return Values</span></strong><span>:</span>
<code>table</code><span> state: a Lua table, should be passed, unmodified to </span><code>MIDI_SetState</code><span> when the MIDIUtils state is to be restored.</span></p></li></ul><p><strong><span>MIDI_SetState</span></strong></p><p><span>	</span><code>MIDIUtils.MIDI_SetState</code><span>(state)</span></p><ul><li><p><code>MIDI_SetState</code><span>: replaces the current state of MIDIUtils with a state described in the provided table (supplied by </span><code>MIDI_GetState</code><span>).</span></p><p><strong><span>Arguments:</span></strong>
<code>table</code><span> state: a Lua table acquired through a call to </span><code>MIDI_GetState</code></p><p><strong><span>Return Values:</span></strong><span> none</span></p></li></ul><hr /><p><code>MIDIUtils.ENFORCE_ARGS</code><span> = </span><code>true</code></p><ul><li><p><span>Flag to enable/disable argument type-checking. When enabled, submitting the wrong argument type(s) to MIDIUtils functions will cause an error, useful for debugging code. Disable in production code, since the type checking adds some minimal overhead. On by default, see also MIDIUtils.InitializeTake(), where this can be set.</span></p></li></ul><p><code>MIDIUtils.CORRECT_OVERLAPS</code><span> = </span><code>false</code></p><ul><li><p><span>Flag to enable/disable overlap correction on commit. Off by default, but may be desirable if the option &quot;Correct overlapping notes while editing&quot; is enabled, or for the Inline MIDI Editor (where that option is always active).</span></p></li></ul><p><code>MIDIUtils.CORRECT_OVERLAPS_FAVOR_SELECTION</code><span> = </span><code>false</code></p><ul><li><p><span>If </span><code>CORRECT_OVERLAPS</code><span> is enabled, </span><code>CORRECT_OVERLAPS_FAVOR_SELECTION</code><span> determines whether the selection&#39;s note-off takes precedence over an unselected note-on when performing the overlap correction. Off by default.</span></p></li></ul><p><code>MIDIUtils.CORRECT_OVERLAPS_FAVOR_NOTEON</code><span> = </span><code>false</code></p><ul><li><p><span>If </span><code>CORRECT_OVERLAPS</code><span> and </span><code>CORRECT_OVERLAPS_FAVOR_SELECTION</code><span> are enabled, </span><code>CORRECT_OVERLAPS_FAVOR_NOTEON</code><span> determines whether a note collision of selected events favors the note-on or note-off when performing the overlap correction. Off by default.</span></p></li></ul><p><code>MIDIUtils.ALLNOTESOFF_SNAPS_TO_ITEM_END</code><span> = </span><code>true</code></p><ul><li><p><span>If </span><code>ALLNOTESOFF_SNAPS_TO_ITEM_END</code><span> is enabled, the &quot;All Notes Off&quot; event (CC#123, at the end of every item) will be snapped to the end of the item, rather than floating around near the end of the item, or being stuck at the end of the last note, or whatever REAPER decides to do with it. On by default.</span></p></li></ul><p><code>MIDIUtils.CLAMP_MIDI_BYTES</code><span> = </span><code>false</code></p><ul><li><p><span>REAPER&#39;s default behavior is to AND incoming data byte values with 0x7F, causing values above 127 to wrap around, where 128 = 0, 129 = 1, and so on. When this option is enabled, incoming data bytes will be clipped, such that values below 0 = 0, and values above 127 = 127. Off by default.</span></p></li></ul><p><code>MIDIUtils.CORRECT_EXTENTS</code><span> = </span><code>false</code></p><ul><li><p><span>Modify the item extents to accommodate changes to the contents. Off by default.</span></p></li></ul><p><code>MIDIUtils.USE_XPCALL</code><span> = </span><code>true</code></p><ul><li><p><span>By default, calls to MIDIUtils are wrapped in </span><code>xpcall</code><span> to help catch and display errors. This comes with a certain non-zero cost, though. Disable </span><code>USE_XPCALL</code><span> to use direct calling.</span></p></li></ul><p><code>MIDIUtils.COMMIT_CANSKIP</code><span> = </span><code>false</code></p><ul><li><p><span>When enabled, and if MIDIUtils detects that there has been no change to the MIDI events it would send to REAPER at commit time, MIDIUtils won&#39;t send the data. Use with care. If this is enabled, the user can use (the otherwise undocumented function) </span><code>MIDIUtils.MIDI_ForceNextTransaction()</code><span> to force the data to be sent on the next commit.</span></p></li></ul></div></div>
</body>
</html>